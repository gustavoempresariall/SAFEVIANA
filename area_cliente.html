<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Área do Cliente - Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <link rel="website icon" type="png" href="imagens/icones/iconecabc.png">
  <style>
    :root {
      --sv-green: #2e7d32;
      --sv-green-dark: #1e6028;
      --sv-accent: #10b981;
      --sv-border: #e5e7eb;
      --sv-light: #f9fafb;
      --sv-warning: #b91c1c;
      --sv-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      --sv-gradient: linear-gradient(135deg, #2e7d32, #10b981);
      --sv-text: #111827;
    }

    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--sv-light);
      color: var(--sv-text);
    }

    .container {
      display: flex;
      min-height: 100vh;
    }

    /* =========================================================
   SafeViana • Dashboard Styles (sv-dashboard-css-20250922)
   – Mantém a aparência padrão da Sidebar, Topbar e componentes
   ========================================================= */

/* ===== Tokens / Design System ===== */
:root{
  --sv-green:#2e7d32;
  --sv-green-dark:#1e6028;
  --sv-accent:#10b981;
  --sv-border:#e5e7eb;
  --sv-light:#f9fafb;
  --sv-text:#111827;
  --sv-shadow:0 10px 30px rgba(0,0,0,.08);
  --sv-gradient:linear-gradient(135deg,#2e7d32 0%,#10b981 100%);
}

*{ box-sizing:border-box }
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
  background:var(--sv-light);
  color:var(--sv-text);
}

 /* ===== LAYOUT (sidebar/topbar) ===== */
    .container{ display:flex; min-height:100vh }

    .sidebar{
  width:200px;
  background:#fff;
  border-right:1px solid var(--sv-border);
  padding:20px 10px;
  display:flex; flex-direction:column; justify-content:space-between;
  position:fixed; inset:0 auto 0 0;
  z-index:1000;
  box-shadow:none !important; /* totalmente sem sombra */
  transition:width .3s;
}

    .sidebar.collapsed{ width:60px; padding:20px 6px }

    .logo{
      display:flex; align-items:center; gap:10px;
      font-weight:800; color:#111827; margin-bottom:18px;
      white-space:nowrap; width:100%;
    }
    .logo i{
      font-size:1.35rem; color:var(--sv-green);
      display:grid; place-items:center; width:40px; height:40px;
      border-radius:12px; background:#f3f7f4; margin:0;
    }
    .sidebar.collapsed .logo{ justify-content:center; gap:0; padding-inline:0 }
    .sidebar.collapsed .logo span{ display:none }
    .sidebar.collapsed .logo i{ margin-inline:auto }

    .sidebar nav ul{ list-style:none; margin:0; padding:0 }
    .sidebar nav li{ margin:10px 0 }
    .sidebar nav a{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px; border-radius:12px;
      text-decoration:none; color:#374151; font-weight:600; transition:.2s;
    }
    .sidebar nav a i{ width:20px; text-align:center }
    .sidebar nav a:hover{ background:var(--sv-green); color:#fff }
    .sidebar nav a.active{
      background:linear-gradient(135deg,#2e7d32 0%,#2e7d32 60%,#10b981 100%);
      color:#fff; box-shadow:0 6px 16px rgba(46,125,50,.25);
    }
    .sidebar.collapsed nav a{ justify-content:center }
    .sidebar.collapsed nav a span{ display:none }

    .admin-title{ font-size:.78rem; color:#6b7280; margin:10px 8px }
    .sidebar.collapsed .admin-title{ display:none }

    .bottom-section ul{ list-style:none; margin:6px 0 0; padding:0 }
    .bottom-section li{
      display:flex; align-items:center; gap:8px;
      padding:8px; border-radius:10px; cursor:pointer;
    }
    .bottom-section li:hover{ background:var(--sv-green); color:#fff }
    .logout-btn{
      width:100%; margin-top:8px; padding:10px; border:0; border-radius:12px; cursor:pointer;
      background:var(--sv-gradient); color:#fff; font-weight:700;
      box-shadow:0 8px 20px rgba(16,185,129,.35);
    }
    .sidebar.collapsed .bottom-section li span,
    .sidebar.collapsed .logout-btn span{ display:none }

    .main{ flex:1; display:flex; flex-direction:column; margin-left:200px }

    .topbar{
      position:fixed; left:200px; right:0; top:0; z-index:900;
      background:#fff; border-bottom:1px solid var(--sv-border);
      padding:12px 20px; display:flex; align-items:center; justify-content:space-between;
      box-shadow:var(--sv-shadow);
    }
    .hamburger{ border:0; background:transparent; font-size:1.4rem; cursor:pointer; margin-right:8px }
    .topbar h2{ font-size:1.25rem; margin:0 }
    .topbar h2 span{ color:var(--sv-green) }
    .topbar input{
      padding:8px 12px; border:1px solid var(--sv-border); border-radius:10px; width:230px;
    }

    .user-info{ display:flex; align-items:center; gap:8px; font-weight:600 }
    .profile-avatar{
      width:36px; height:36px; border-radius:50%; overflow:hidden;
      border:2px solid var(--sv-green); display:flex; align-items:center; justify-content:center; background:#fff;
    }
    .profile-avatar img{ width:100%; height:100%; object-fit:cover; display:block }
    .profile-avatar .initials{
      text-transform:uppercase; color:var(--sv-green); font-weight:800; font-size:.9rem; letter-spacing:.5px;
    }

    .content{ padding:22px; margin-top:72px }

/* ===== HERO ===== */
.hero{
  position:relative; overflow:hidden; border-radius:16px; padding:22px;
  background:var(--sv-gradient); color:#fff; box-shadow:var(--sv-shadow);
}
.hero h1{ margin:0 0 6px; font-size:clamp(1.1rem,1.6vw,1.4rem) }
.hero p{ margin:0; opacity:.95 }
.hero .badges{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap }
.chip{
  background:rgba(255,255,255,.14); backdrop-filter:blur(6px);
  padding:6px 10px; border-radius:999px; font-size:.8rem; border:1px solid rgba(255,255,255,.25);
}

/* ===== SECTION TITLES ===== */
.section-title{
  font-size:1.05rem; margin:18px 0 10px; display:flex; align-items:center; gap:8px; color:#222;
}
.section-title i{
  color:#fff; background:var(--sv-green); width:26px; height:26px; border-radius:8px; display:grid; place-items:center;
}

/* ===== QUOTES (cards de tipos) ===== */
.quote-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px }
.quote-card{
  position:relative; background:#fff; border:1px solid var(--sv-border); border-radius:16px; padding:18px; text-align:center;
  transition:transform .25s, box-shadow .25s, border-color .25s; box-shadow:var(--sv-shadow); cursor:pointer; isolation:isolate;
}
.quote-card:hover{ transform:translateY(-4px); box-shadow:0 14px 30px rgba(46,125,50,.18); border-color:rgba(46,125,50,.25) }
.quote-icon{
  width:52px; height:52px; margin:2px auto 10px; border-radius:14px; background:linear-gradient(145deg,#f4faf6,#fff);
  border:1px solid var(--sv-border); display:grid; place-items:center;
  box-shadow:inset 0 1px 0 #fff, 0 8px 16px rgba(0,0,0,.05);
}
.quote-icon i{ font-size:1.35rem; color:var(--sv-green) }
.quote-card h3{ margin:4px 0 2px; font-size:1rem }
.quote-card p{ margin:0; color:#6b7280; font-size:.9rem }
.quote-cta{
  margin-top:12px; display:inline-flex; align-items:center; gap:8px; padding:9px 14px; border-radius:12px; border:1px solid var(--sv-green);
  color:var(--sv-green); background:#fff; font-weight:800; text-decoration:none; transition:.2s;
}
.quote-card:hover .quote-cta{ background:var(--sv-green); color:#fff; box-shadow:0 8px 18px rgba(46,125,50,.25) }

/* Destaque do card selecionado */
.quote-card.active{ outline:2px solid var(--sv-green); outline-offset:2px }

/* ===== TRUST / FAQ ===== */
.trust-bar{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:10px; margin-top:14px }
.trust-item{
  background:#fff; border:1px solid var(--sv-border); border-radius:14px; padding:12px;
  display:flex; align-items:center; gap:10px; box-shadow:var(--sv-shadow);
}
.trust-item i{ color:var(--sv-accent) }

.faq{ margin-top:18px }
.faq details{
  background:#fff; border:1px solid var(--sv-border); border-radius:14px; margin:8px 0; box-shadow:var(--sv-shadow); transition:.2s;
}
.faq summary{
  padding:12px 14px; cursor:pointer; font-weight:700; display:flex; align-items:center; justify-content:space-between;
}
.faq summary::after{
  content:'\f078'; font-family:"Font Awesome 6 Free"; font-weight:900; color:var(--sv-accent); transition:transform .25s;
}
.faq[open] summary::after{ transform:rotate(180deg) }
.faq .answer{ padding:0 14px 12px; color:#374151; font-size:.95rem }

/* ===== MODAL ===== */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(17,24,39,.55); z-index:1200; padding:18px;
}
.modal.open{ display:flex }

.modal-card{
  width:min(720px, 96vw);
  background:#fff; border-radius:16px; border:1px solid var(--sv-border);
  box-shadow:0 20px 60px rgba(0,0,0,.25);
  overflow:hidden;
  display:flex; flex-direction:column;
  max-height:90vh; /* limita à altura da viewport */
}

.modal-header{
  padding:14px 16px; background:var(--sv-gradient); color:#fff;
  display:flex; align-items:flex-start; justify-content:space-between;
  position:sticky; top:0; z-index:1; /* fixo no topo durante rolagem do corpo */
}
.modal-body{ padding:16px; overflow:auto }
.grid2{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px }
.modal-body label{ font-weight:700; font-size:.9rem }
.modal-body input,.modal-body select{
  width:100%; padding:10px; border:1px solid var(--sv-border); border-radius:10px; font-size:.95rem;
}
.modal-footer{
  padding:14px 16px; display:flex; gap:10px; justify-content:flex-end;
  border-top:1px solid var(--sv-border); background:#fafafa;
  position:sticky; bottom:0; z-index:1;
}
.btn{ border:0; border-radius:12px; padding:10px 14px; font-weight:800; cursor:pointer }
.btn.primary{ background:var(--sv-gradient); color:#fff }
.btn.secondary{ background:#f3f4f6; color:#111827; border:1px solid var(--sv-border) }
.btn.link{ background:transparent; color:var(--sv-green); padding:8px }

/* ===== Seletor de Corretor ===== */
.broker-wrap{ margin-top:12px; grid-column:1 / -1 }
.broker-title{
  font-weight:800; font-size:.95rem; margin:0 0 8px;
  display:flex; align-items:center; gap:8px;
}
.broker-title i{
  color:#fff; background:var(--sv-green); width:22px; height:22px; border-radius:6px;
  display:grid; place-items:center; font-size:.8rem;
}
.broker-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:10px }
.broker-card{
  display:grid; grid-template-columns:auto 1fr; gap:10px; align-items:center;
  background:#fff; border:1px solid var(--sv-border); border-radius:12px; padding:10px;
  box-shadow:var(--sv-shadow); cursor:pointer; transition:.2s; position:relative;
}
.broker-card:hover{ transform:translateY(-2px); box-shadow:0 10px 24px rgba(46,125,50,.18); border-color:rgba(46,125,50,.25) }
.broker-card input[type="radio"]{ position:absolute; inset:10px; width:auto; height:auto; opacity:0 }
.broker-card .check{ position:absolute; right:10px; top:10px; font-size:.9rem; color:#9ca3af }
.broker-card input[type="radio"]:checked ~ .check{ color:var(--sv-green) }

.broker-avatar{
  width:48px; height:48px; border-radius:50%; overflow:hidden;
  border:2px solid var(--sv-green);
  display:flex; align-items:center; justify-content:center; background:#fff;
  font-weight:800; color:var(--sv-green);
}
.broker-avatar img{ width:100%; height:100%; object-fit:cover; display:block }

.broker-info strong{ display:block; font-size:.98rem }
.broker-info small{ display:block; color:#6b7280; line-height:1.2 }
.broker-info small i{ width:14px; text-align:center; margin-right:6px }

/* ===== Responsive ===== */
@media (max-width: 900px){
  .main{ margin-left:60px }
  .topbar{ left:60px }
}
@media (max-width: 640px){
  .topbar input{ display:none }
  .grid2{ grid-template-columns:1fr }
  .modal-card{ max-height:92vh }
  .broker-grid{ grid-template-columns:1fr }
}


    .admin-title {
      font-size: 0.8rem;
      color: #6b7280;
      margin: 1rem 0 0.5rem 0;
      transition: all 0.3s;
    }

    .sidebar.collapsed .admin-title span {
      display: none;
    }

    .sidebar.collapsed .admin-title::after {
      content: "ADM";
      display: block;
      font-weight: bold;
      text-align: center;
      color: #6b7280;
    }

    .sidebar .bottom-section ul {
      list-style: none;
      padding: 0;
      margin: 0.5rem 0;
    }

    .sidebar .bottom-section ul li {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #374151;
      font-weight: 500;
      padding: 8px;
      border-radius: 8px;
      transition: 0.2s;
      white-space: nowrap;
    }

    .sidebar .bottom-section ul li:hover {
      background: var(--sv-green);
      color: #fff;
    }

    .sidebar.collapsed .bottom-section ul li {
      justify-content: center;
    }

    .sidebar .bottom-section ul li span {
      display: none;
    }

    .logout-btn {
      margin-top: 20px;
      padding: 10px;
      width: 100%;
      background: var(--sv-green);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.2s;
      white-space: nowrap;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .logout-btn:hover {
      background: var(--sv-green-dark);
    }

    .sidebar.collapsed .logout-btn span {
      display: none;
    }

    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      margin-left: 200px;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;
      background: #fff;
      border-bottom: 1px solid var(--sv-border);
      position: fixed;
      top: 0;
      left: 200px;
      right: 0;
      z-index: 900;
      box-shadow: var(--sv-shadow);
    }

    .hamburger {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      margin-right: 15px;
    }

    .topbar h2 {
      font-size: 1.4rem;
    }

    .topbar h2 span {
      color: var(--sv-green);
    }

    .topbar input {
      padding: 8px 12px;
      border: 1px solid var(--sv-border);
      border-radius: 6px;
      width: 220px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
    }

    /* Estilos para o conteúdo principal */
    .content {
      padding: 20px;
      margin-top: 80px;
      flex: 1;
      overflow-y: auto;
      height: calc(100vh - 80px);
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .welcome-section {
      background: var(--sv-gradient);
      border-radius: 12px;
      padding: 15px;
      color: #fff;
      margin-bottom: 20px;
      text-align: center;
      box-shadow: var(--sv-shadow);
      animation: slideIn 0.5s ease-out;
      position: relative;
      overflow: hidden;
    }

    .welcome-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
      animation: gradientShift 5s infinite;
    }

    @keyframes gradientShift {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .welcome-section h1 {
      font-size: 1.6rem;
      margin: 0 0 6px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .welcome-section h1 span {
      color: #fff;
    }

    .welcome-section p {
      font-size: 0.9rem;
      margin: 0 0 12px;
      opacity: 0.9;
    }

    .cta-button {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: #fff;
      color: var(--sv-green);
      border: 1px solid var(--sv-green);
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
      animation: pulseCTA 2s infinite;
    }

    .cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(46, 125, 50, 0.3);
      background: var(--sv-green);
      color: #fff;
    }

    @keyframes pulseCTA {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .cta-button.secondary {
      background: #6b7280;
      color: #fff;
      border: none;
    }

    .cta-button.secondary:hover {
      background: #4b5563;
      box-shadow: 0 4px 8px rgba(75, 85, 99, 0.3);
    }

    /* Seção de Meus Seguros Ativos */
    .active-insurance-section {
      margin-bottom: 20px;
      background: #fff;
      border: 1px solid var(--sv-border);
      border-radius: 10px;
      padding: 5px;
      box-shadow: var(--sv-shadow);
      animation: slideIn 0.6s ease-out;
    }

    .active-insurance-section h2 {
      font-size: 0.95rem;
      margin-bottom: 5px;
      color: var(--sv-text);
      display: flex;
      align-items: center;
    }

    .active-insurance-section h2 i {
      color: var(--sv-accent);
      margin-right: 5px;
    }

    .filter-section {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .filter-section input, .filter-section select {
      padding: 6px 10px;
      border: 1px solid var(--sv-border);
      border-radius: 6px;
      font-size: 0.8rem;
      width: 100%;
      max-width: 180px;
    }

    .filter-section input:focus, .filter-section select:focus {
      outline: 2px solid var(--sv-accent);
    }

    .insurance-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 5px;
    }

    .insurance-card {
      background: var(--sv-light);
      border: 1px solid var(--sv-border);
      border-radius: 8px;
      padding: 5px;
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
      animation: slideIn 0.7s ease-out;
    }

    .insurance-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(46, 125, 50, 0.25);
    }

    .insurance-card i {
      font-size: 0.8rem;
      color: var(--sv-accent);
      margin-bottom: 3px;
    }

    .insurance-card h3 {
      font-size: 0.8rem;
      margin: 3px 0;
      color: var(--sv-text);
      font-weight: 600;
    }

    .insurance-card p {
      font-size: 0.6rem;
      color: #374151;
      margin: 1px 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .insurance-card .status {
      font-weight: 500;
      color: var(--sv-accent);
    }

    .insurance-card .status.warning {
      color: var(--sv-warning);
      animation: pulse 2s infinite;
    }

    .insurance-card .progress-bar {
      width: 100%;
      height: 2px;
      background: #e5e7eb;
      border-radius: 1px;
      overflow: hidden;
      margin: 3px 0;
    }

    .insurance-card .progress-bar span {
      display: block;
      height: 100%;
      background: var(--sv-gradient);
      transition: width 0.3s;
    }

    .insurance-card .action-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3px;
      margin-top: 3px;
    }

    .insurance-card a {
      display: inline-flex;
      align-items: center;
      gap: 3px;
      padding: 1px 4px;
      background: var(--sv-green);
      color: #fff;
      border: none;
      border-radius: 3px;
      font-size: 0.6rem;
      font-weight: 500;
      text-decoration: none;
      transition: transform 0.2s, box-shadow 0.2s;
      justify-content: center;
      position: relative;
    }

    .insurance-card a:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 6px rgba(46, 125, 50, 0.3);
    }

    .insurance-card a::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--sv-text);
      color: #fff;
      padding: 3px 6px;
      border-radius: 4px;
      font-size: 0.6rem;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s, visibility 0.2s;
    }

    .insurance-card a:hover::after {
      opacity: 1;
      visibility: visible;
    }

    .insurance-card a:focus {
      outline: 2px solid var(--sv-accent);
      outline-offset: 2px;
    }

    .services-section {
      margin-bottom: 20px;
      animation: slideIn 0.8s ease-out;
    }

    .services-section h2 {
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: var(--sv-text);
      display: flex;
      align-items: center;
    }

    .services-section h2 i {
      color: var(--sv-accent);
      margin-right: 5px;
    }

    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
    }

    .service-card {
      background: #fff;
      border: 1px solid var(--sv-border);
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: var(--sv-shadow);
      position: relative;
      overflow: hidden;
      background-size: cover;
      background-position: center;
    }

    .service-card.car { background-image: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url('https://source.unsplash.com/random/300x200/?car'); }
    .service-card.home { background-image: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url('https://source.unsplash.com/random/300x200/?house'); }
    .service-card.life { background-image: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url('https://source.unsplash.com/random/300x200/?heart'); }
    .service-card.business { background-image: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url('https://source.unsplash.com/random/300x200/?business'); }

    .service-card:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 12px rgba(46, 125, 50, 0.25);
    }

    .service-card i {
      font-size: 1.4rem;
      color: var(--sv-accent);
      margin-bottom: 5px;
      transition: transform 0.2s;
    }

    .service-card:hover i {
      transform: rotate(10deg);
    }

    .service-card h3 {
      font-size: 0.95rem;
      margin: 5px 0;
      color: var(--sv-text);
    }

    .service-card p {
      font-size: 0.75rem;
      color: #374151;
      margin: 0 0 8px;
    }

    .tips-section {
      margin-bottom: 20px;
      animation: slideIn 0.9s ease-out;
    }

    .tips-section h2 {
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: var(--sv-text);
      display: flex;
      align-items: center;
    }

    .tips-section h2 i {
      color: var(--sv-accent);
      margin-right: 5px;
    }

    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
    }

    .tip-card {
      background: #fff;
      border: 1px solid var(--sv-border);
      border-radius: 10px;
      padding: 10px;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: var(--sv-shadow);
      position: relative;
    }

    .tip-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(46, 125, 50, 0.25);
    }

    .tip-card i {
      font-size: 1.1rem;
      color: var(--sv-accent);
      margin-bottom: 5px;
    }

    .tip-card h3 {
      font-size: 0.95rem;
      margin: 5px 0;
      color: var(--sv-text);
    }

    .tip-card p {
      font-size: 0.75rem;
      color: #374151;
      margin: 0 0 6px;
    }

    .tip-card a {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.7rem;
      color: var(--sv-accent);
      text-decoration: none;
      transition: color 0.2s;
    }

    .tip-card a:hover {
      color: var(--sv-green-dark);
    }

    .faq-section {
      margin-bottom: 20px;
      animation: slideIn 1s ease-out;
    }

    .faq-section h2 {
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: var(--sv-text);
      display: flex;
      align-items: center;
    }

    .faq-section h2 i {
      color: var(--sv-accent);
      margin-right: 5px;
    }

    .faq-item {
      background: #fff;
      border: 1px solid var(--sv-border);
      border-radius: 10px;
      margin-bottom: 6px;
      box-shadow: var(--sv-shadow);
      transition: transform 0.2s;
    }

    .faq-item:hover {
      transform: translateY(-2px);
    }

    .faq-item summary {
      padding: 8px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--sv-text);
      transition: background 0.2s;
    }

    .faq-item summary:hover {
      background: #e8f5e9;
    }

    .faq-item summary::after {
      content: '\f078';
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      transition: transform 0.3s;
      color: var(--sv-accent);
    }

    .faq-item[open] summary::after {
      transform: rotate(180deg);
    }

    .faq-item .faq-answer {
      padding: 0 8px 8px;
      color: #374151;
      font-size: 0.75rem;
    }

    .benefits-section {
      margin-bottom: 20px;
      background: #fff;
      border: 1px solid var(--sv-border);
      border-radius: 10px;
      padding: 10px;
      box-shadow: var(--sv-shadow);
      animation: slideIn 1.1s ease-out;
      position: relative;
    }

    .benefits-section h2 {
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: var(--sv-text);
      display: flex;
      align-items: center;
    }

    .benefits-section h2 i {
      color: var(--sv-accent);
      margin-right: 5px;
    }

    .benefits-grid {
      display: flex;
      overflow-x: auto;
      gap: 10px;
      padding-bottom: 10px;
      scroll-snap-type: x mandatory;
      position: relative;
    }

    .benefit-card {
      flex: 0 0 200px;
      background: var(--sv-light);
      border: 1px solid var(--sv-border);
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: var(--sv-shadow);
      scroll-snap-align: start;
    }

    .benefit-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(46, 125, 50, 0.25);
    }

    .benefit-card i {
      font-size: 1.4rem;
      color: var(--sv-accent);
      margin-bottom: 5px;
    }

    .benefit-card h3 {
      font-size: 0.95rem;
      margin: 5px 0;
      color: var(--sv-text);
    }

    .benefit-card p {
      font-size: 0.75rem;
      color: #374151;
      margin: 0 0 8px;
    }

    .benefit-card a {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: var(--sv-gradient);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 500;
      text-decoration: none;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .benefit-card a:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(46, 125, 50, 0.3);
    }

    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 8px;
    }

    .carousel-controls button {
      background: var(--sv-green);
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s;
    }

    .carousel-controls button:hover {
      background: var(--sv-green-dark);
    }

    .carousel-controls button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    @media (max-width: 768px) {
      .main-content {
        margin-left: 60px;
      }

      .topbar {
        left: 60px;
      }

      .topbar input {
        width: 150px;
      }

      .welcome-section h1 {
        font-size: 1.4rem;
      }

      .filter-section {
        flex-direction: column;
      }

      .filter-section input, .filter-section select {
        max-width: 100%;
      }

      .insurance-grid,
      .services-grid,
      .tips-grid {
        grid-template-columns: 1fr;
      }

      .benefits-grid {
        flex-direction: row;
        overflow-x: auto;
      }
    }

    .user-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 500;
}

.profile-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--sv-green);
  color: #fff;
  font-weight: 600;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  text-transform: uppercase;
}

.profile-avatar.small-avatar {
  width: 32px;
  height: 32px;
  font-size: 0.8rem;
}

.profile-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

.profile-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  overflow: hidden;
  background: #fff;
  display: flex; align-items: center; justify-content: center;
  border: 2px solid var(--sv-green);   /* 🔹 borda igual ao outro header */
}
.profile-avatar.small-avatar { width: 32px; height: 32px; }
.profile-avatar img {
  width: 100%; height: 100%; object-fit: cover; display: block;
}

/* === Seguros Ativos no padrão FAQ (accordion) === */
.policy-list{margin-top:8px}
.policy-item{
  background:#fff;border:1px solid var(--sv-border);border-radius:10px;
  margin-bottom:6px;box-shadow:var(--sv-shadow);transition:transform .2s
}
.policy-item:hover{transform:translateY(-2px)}
.policy-item summary{
  padding:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;
  justify-content:space-between;gap:10px;color:var(--sv-text)
}
.policy-item summary .left{display:flex;align-items:center;gap:8px}
.policy-item summary i{color:var(--sv-accent)}
.policy-item summary .right{display:flex;align-items:center;gap:8px}
.policy-item summary::after{
  content:'\f078';font-family:"Font Awesome 6 Free";font-weight:900;
  color:var(--sv-accent);transition:transform .3s;margin-left:8px
}
.policy-item[open] summary::after{transform:rotate(180deg)}

.status-chip{
  padding:4px 8px;border-radius:9999px;font-size:.72rem;font-weight:700;
  background:#e8f5e9;color:var(--sv-green)
}
.status-chip.warning{background:#fee2e2;color:var(--sv-warning)}

.policy-body{padding:8px 8px 12px;color:#374151;font-size:.8rem}
.policy-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:8px;margin:6px 0}
.policy-body p{margin:0}
.policy-progress{width:100%;height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden;margin-top:8px}
.policy-progress span{display:block;height:100%;background:var(--sv-gradient)}

.policy-actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.policy-actions .cta-button{font-size:.78rem;padding:6px 10px;animation:none}
.policy-actions .cta-button.secondary{background:#6b7280}

/* ===== Corrige linha roxa abaixo do botão Sair ===== */
.logout-btn,
.logout-btn:focus,
.logout-btn:active,
a:focus,
a:active,
a:focus-visible {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
  text-decoration: none !important;
}

/* Remove possível linha de foco no link pai */
.bottom-section a:focus,
.bottom-section a:active {
  outline: none !important;
  box-shadow: none !important;
  border: none !important;
}

/* Remove qualquer destaque de foco padrão do navegador */
*:focus {
  outline: none !important;
}

  </style>
</head>
<body>

<div class="container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div>
      <div class="logo">
        <i class="fa-solid fa-user-shield"></i>
        <span>Área do Cliente</span>
      </div>

       <nav>
  <ul>
    <li>
      <a href="{{ url_for('area_cliente') }}" class="{% if ACTIVE_MENU == 'dashboard' %}active{% endif %}">
        <i class="fa-solid fa-gauge"></i> <span>Dashboard</span>
      </a>
    </li>
    <li>
      <a href="{{ url_for('dadosclientes') }}" class="{% if ACTIVE_MENU == 'meus_dados' %}active{% endif %}">
        <i class="fa-solid fa-user"></i> <span>Meus Dados</span>
      </a>
    </li>
    <li>
      <a href="{{ url_for('cotacoes_clientes') }}" class="{% if ACTIVE_MENU == 'cotacoes' %}active{% endif %}">
        <i class="fa-solid fa-file-signature"></i> <span>Solicitar Cotações</span>
      </a>
    </li>
    <li>
      <a href="{{ url_for('acompanhamento_ap_cliente') }}" class="{% if ACTIVE_MENU == 'apolices' %}active{% endif %}">
        <i class="fa-solid fa-file-contract"></i> <span>Minhas Apólices</span>
      </a>
    </li>
    <li>
      <a href="{{ url_for('cliente_propostas_html') }}" class="{% if ACTIVE_MENU == 'propostas' %}active{% endif %}">
        <i class="fa-solid fa-clipboard-list"></i> <span>Minhas Propostas</span>
      </a>
    </li>
    <li>
      <a href="{{ url_for('sinistros_segurado') }}" class="{% if ACTIVE_MENU == 'sinistros' %}active{% endif %}">
        <i class="fa-solid fa-car-crash"></i> <span>Meus Sinistros</span>
      </a>
    </li>
  </ul>
</nav>
    </div>
    <div class="bottom-section">
      <p class="admin-title"><span>Voltar para home ↓ </span></p>
      <a href="index.html" class="logout-btn">
  <i class="fa-solid fa-right-from-bracket"></i> <span>Sair</span>
</a>
    </div>
  </aside>

  <!-- Main -->
  <main class="main-content">
    <header class="topbar">
      <div style="display: flex; align-items: center; gap: 10px;">
        <button id="toggleSidebar" class="hamburger">☰</button>
        <h2>Safe<span>Viana</span></h2>
      </div>
      <input type="text" placeholder="Buscar clientes, apólices...">

      <div class="user-info" id="userInfo">
  <div class="profile-avatar small-avatar" id="topbarAvatar" title="Meu Perfil">
    {# tenta pegar da instância 'cliente'; senão, usa 'cliente_foto' #}
    {% set foto_norm = (cliente.foto_de_perfil|replace('\\','/')|replace('static/','')) if cliente and cliente.foto_de_perfil
                       else (cliente_foto|replace('static/','') if cliente_foto else None) %}
    {% if foto_norm %}
      <img src="{{ url_for('static', filename=foto_norm) }}" alt="Foto de Perfil">
    {% else %}
      {# === mesmas iniciais da outra página: primeira letra do nome + primeira do segundo token === #}
      {% set name_str = (cliente.nome if cliente else (cliente_nome or '')) | trim %}
      {% set parts = name_str.split() %}
      {% set first  = parts[0][:1] if parts else '' %}
      {% set second = (parts[1][:1] if parts|length > 1 else (parts[0][1:2] if parts and parts[0]|length>1 else '')) %}
      <span class="initials">{{ (first ~ second).upper() }}</span>
    {% endif %}
  </div>
  <span class="user-name">{{ cliente.nome if cliente else (cliente_nome or '') }}</span>
</div>



    </header>

    <!-- Conteúdo Principal -->
    <div class="content">
      <!-- Seção de Boas-Vindas -->
      <div class="welcome-section">
        <h1>Olá, <span class="user-name">{{ cliente.nome if cliente else (cliente_nome or '') }}</span></h1>
        <p>Acompanhe seus seguros, documentos e mantenha suas informações sempre atualizadas.</p>

  <div style="display: flex; flex-wrap: wrap; justify-content: space-around; align-items: center; gap: 25px; margin-top: 30px;">
    <!-- Seguros Ativos -->
    <div style="text-align: center;">
      <h2>Seguros Ativos <i class="fa-solid fa-circle-info" style="color: var(--sv-accent);"></i></h2>
      <p style="font-size: 1.1rem;">{{ kpis.ativas or 0 }} apólice(s) vigente(s)</p>
    </div>

    <!-- Valor Seguro -->
    <div style="text-align: center;">
      <h2>Valor Seguro <i class="fa-solid fa-dollar-sign" style="color: var(--sv-accent);"></i></h2>
      <p style="font-size: 1.1rem;">R$ {{ "%.2f"|format(kpis.valor_total or 0) }}</p>
    </div>

    <!-- Sinistros -->
    <div style="text-align: center;">
      <h2>Sinistros <i class="fa-solid fa-exclamation-triangle" style="color: var(--sv-accent);"></i></h2>
      <p style="font-size: 1.1rem;">{{ kpis.sinistros_abertos or 0 }} aberto(s)</p>
    </div>

    <!-- Próximo Vencimento -->
    <div style="text-align: center;">
      <h2>Próximo Vencimento <i class="fa-solid fa-calendar" style="color: var(--sv-accent);"></i></h2>
      {% if kpis.proximo_tipo %}
        <p style="font-size: 1.1rem;">{{ kpis.proximo_tipo }} em {{ kpis.dias_vencimento }} dias</p>
      {% else %}
        <p style="font-size: 1.1rem;">Sem vencimentos próximos</p>
      {% endif %}
    </div>
  </div>
</div>

      <div style="display: flex; gap: 20px; margin-bottom: 20px; align-items: stretch;">
  <!-- Gráfico -->
  <div style="flex: 2; background: #fff; border: 1px solid var(--sv-border); border-radius: 10px; padding: 15px; box-shadow: var(--sv-shadow); display:flex; flex-direction:column; justify-content:space-between;">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
      <h2 style="font-size:1rem; font-weight:600;">Evolução da Cobertura</h2>
    </div>
    <div style="flex:1; min-height:220px; max-height:250px;">
      <canvas id="coverageChart"></canvas>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    </div>
  </div>

  <!-- Ações Rápidas -->
  <div style="flex: 1; background: #fff; border: 1px solid var(--sv-border); border-radius: 10px; padding: 15px; box-shadow: var(--sv-shadow); display:flex; flex-direction:column; justify-content:flex-start;">
    <h2 style="font-size:1rem; font-weight:600; margin-bottom:12px;">Ações Rápidas</h2>
    <div style="display:flex; flex-direction:column; gap:10px;">
      <a></a>
      <a></a>
      <a href="{{ url_for('cotacoes_clientes') }}"
         style="padding:10px; background: var(--sv-green); color:#fff; border:none; border-radius:6px; font-weight:600; font-size:0.9rem; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; gap:6px; text-decoration:none; transition:all .2s;">
         <i class="fa-solid fa-file-signature"></i> Nova Cotação
      </a>

      <a href="{{ url_for('acompanhamento_ap_cliente') }}"
        style="padding:10px; background:#f9fafb; color:var(--sv-green); border:1px solid var(--sv-green);
          border-radius:6px; font-weight:600; font-size:0.9rem; cursor:pointer; display:flex;
          align-items:center; justify-content:center; gap:6px; transition:all 0.2s; text-decoration:none;">
       <i class="fa-solid fa-download"></i> Baixar Apólices
      </a>

      <a href="https://wa.me/5518988076390?text=Ol%C3%A1!%20Preciso%20de%20suporte."
   target="_blank" rel="noopener"
   style="padding:10px; background:#f9fafb; color:var(--sv-green); border:1px solid var(--sv-green); border-radius:6px; font-weight:600; font-size:0.9rem; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:6px; transition:all .2s; text-decoration:none;">
  <i class="fa-solid fa-phone"></i> Falar com Suporte
        </a>

    </div>
  </div>
</div>

      <!-- Seção de Meus Seguros Ativos (padrão FAQ) -->
<!-- Seção de Meus Seguros Ativos -->
<div class="active-insurance-section">
  <h2><i class="fa-solid fa-file-contract"></i> Meus Seguros Ativos</h2>

  <div class="filter-section">
    <input type="text" id="insuranceFilter" placeholder="Filtrar por apólice ou tipo">
    <select id="statusFilter">
      <option value="">Todos os Status</option>
      <option value="Ativo">Ativo</option>
      <option value="Vencimento Próximo">Vencimento Próximo</option>
      <option value="Cancelado">Cancelado</option>
    </select>
  </div>

  <div class="policy-list">
  {% if apolices %}
    {% for a in apolices %}
      <details class="policy-item" data-policy="{{ a.numero_apolice }}" data-status="{{ a.status }}">
        <summary>
          <div class="left">
            <i class="fa-solid fa-file-contract"></i>
            <span>{{ a.tipo_apolice or 'Apólice' }} — <small>{{ a.numero_apolice }}</small></span>
          </div>
          <div class="right">
            <span class="status-chip">{{ a.status }}</span>
          </div>
        </summary>
        <div class="policy-body">
          <div class="policy-grid">
            <p><strong>Início:</strong> {{ a.data_inicio_fmt }}</p>
            <p><strong>Vencimento:</strong> {{ a.data_termino_fmt }}</p>
            <p><strong>Valor:</strong> R$ {{ "%.2f"|format(a.valor_apolice or 0) }}</p>
            <p><strong>Seguradora:</strong> {{ a.seguradora or '-' }}</p>
          </div>
          <div class="policy-actions">
            <a href="{{ url_for('acompanhamento_ap_cliente') }}" class="cta-button">Detalhes</a>
            <a href="{{ url_for('cotacoes_clientes') }}" class="cta-button secondary">Renovar</a>
            <a href="{{ url_for('sinistros_segurado') }}" class="cta-button secondary">Sinistro</a>
          </div>
        </div>
      </details>
    {% endfor %}
  {% else %}
    <p>Nenhuma apólice ativa encontrada.</p>
  {% endif %}
</div>



      <!-- Seção de Serviços -->
      <div class="services-section">
        <h2><i class="fa-solid fa-shield-halved"></i> Nossos Seguros</h2>
        <div class="services-grid">
          <div class="service-card car" role="region" aria-label="Seguro Auto">
            <i class="fa-solid fa-car"></i>
            <h3>Seguro Auto</h3>
            <p>Proteção completa para seu veículo.</p>
            <a href="cotacoes_clientes.html" class="cta-button" aria-label="Saiba mais sobre seguro auto">Saiba Mais</a>
          </div>
          <div class="service-card home" role="region" aria-label="Seguro Residencial">
            <i class="fa-solid fa-home"></i>
            <h3>Seguro Residencial</h3>
            <p>Garantia de segurança para sua casa.</p>
            <a href="cotacoes_clientes.html" class="cta-button" aria-label="Saiba mais sobre seguro residencial">Saiba Mais</a>
          </div>
          <div class="service-card life" role="region" aria-label="Seguro de Vida">
            <i class="fa-solid fa-heart"></i>
            <h3>Seguro de Vida</h3>
            <p>Tranquilidade para você e sua família.</p>
            <a href="cotacoes_clientes.html" class="cta-button" aria-label="Saiba mais sobre seguro de vida">Saiba Mais</a>
          </div>
          <div class="service-card business" role="region" aria-label="Seguro Empresarial">
            <i class="fa-solid fa-briefcase"></i>
            <h3>Seguro Empresarial</h3>
            <p>Soluções para proteger seu negócio.</p>
            <a href="cotacoes_clientes.html" class="cta-button" aria-label="Saiba mais sobre seguro empresarial">Saiba Mais</a>
          </div>
        </div>
      </div>

      <!-- Seção de Dicas Úteis -->
      <div class="tips-section">
        <h2><i class="fa-solid fa-lightbulb"></i> Dicas Úteis para Segurados</h2>
        <div class="tips-grid">
          <div class="tip-card" role="region" aria-label="Dica sobre seguro auto">
            <i class="fa-solid fa-car"></i>
            <h3>Fique Atento às Coberturas</h3>
            <p>Escolha seguros com base nas coberturas, não apenas no preço.</p>
          </div>
          <div class="tip-card" role="region" aria-label="Dica sobre seguro residencial">
            <i class="fa-solid fa-home"></i>
            <h3>Priorize Suas Necessidades</h3>
            <p>Conheça os planos e proteja o que realmente importa.</p>
          </div>
          <div class="tip-card" role="region" aria-label="Dica sobre economia no seguro auto">
            <i class="fa-solid fa-dollar-sign"></i>
            <h3>Economize com Inteligência</h3>
            <p>Compare seguradoras para o melhor custo-benefício.</p>
          </div>
          <div class="tip-card" role="region" aria-label="Dica sobre seguro flexível">
            <i class="fa-solid fa-shield-alt"></i>
            <h3>Seguros Flexíveis</h3>
            <p>Opte por planos que acompanhem mudanças na sua vida.</p>
          </div>
        </div>
      </div>

      <!-- Seção de FAQ -->
      <div class="faq-section">
        <h2><i class="fa-solid fa-question-circle"></i> Perguntas Frequentes</h2>
        <details class="faq-item" role="region" aria-label="Como solicito uma cotação?">
          <summary aria-label="Como solicito uma cotação?">Como solicito uma cotação?</summary>
          <div class="faq-answer">Clique em "Solicitar Cotações" no menu lateral e preencha o formulário.</div>
        </details>
        <details class="faq-item" role="region" aria-label="O que fazer em caso de sinistro?">
          <summary aria-label="O que fazer em caso de sinistro?">O que fazer em caso de sinistro?</summary>
          <div class="faq-answer">Acesse "Meus Sinistros" no menu e siga as instruções.</div>
        </details>
        <details class="faq-item" role="region" aria-label="Posso alterar meus dados pessoais?">
          <summary aria-label="Posso alterar meus dados pessoais?">Posso alterar meus dados pessoais?</summary>
          <div class="faq-answer">Vá para "Meus Dados" no menu para atualizar suas informações.</div>
        </details>
        <details class="faq-item" role="region" aria-label="Quais tipos de seguros estão disponíveis?">
          <summary aria-label="Quais tipos de seguros estão disponíveis?">Quais tipos de seguros estão disponíveis?</summary>
          <div class="faq-answer">Oferecemos seguros auto, residencial, de vida e empresarial.</div>
        </details>
      </div>
    </div>
  </main>
</div>

<script>window.ACTIVE_MENU = 'dashboard';</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const filterInput = document.getElementById("insuranceFilter");
  const statusFilter = document.getElementById("statusFilter");
  const policies = document.querySelectorAll(".policy-item");

  if (!filterInput || !statusFilter) return;

  function applyFilter() {
    const text = filterInput.value.toLowerCase();
    const status = statusFilter.value;

    policies.forEach(p => {
      const matchesText =
        p.dataset.policy.toLowerCase().includes(text) ||
        p.querySelector(".left span").textContent.toLowerCase().includes(text);
      const matchesStatus = !status || p.dataset.status === status;
      p.style.display = matchesText && matchesStatus ? "" : "none";
    });
  }

  filterInput.addEventListener("input", applyFilter);
  statusFilter.addEventListener("change", applyFilter);
});
</script>


<script>
(() => {
  const insuranceFilter = document.getElementById('insuranceFilter');
  const statusSelect = document.getElementById('statusFilter');
  const policyItems = document.querySelectorAll('.policy-item');

  if (!insuranceFilter || !statusSelect || !policyItems.length) return;

  function applyFilter() {
    const text = insuranceFilter.value.toLowerCase();
    const status = statusSelect.value;

    policyItems.forEach(p => {
      const matchesText =
        p.getAttribute('data-policy')?.toLowerCase().includes(text) ||
        p.querySelector('.left span').textContent.toLowerCase().includes(text);
      const matchesStatus = !status || p.getAttribute('data-status') === status;

      p.style.display = matchesText && matchesStatus ? '' : 'none';
    });
  }

  insuranceFilter.addEventListener('input', applyFilter);
  statusSelect.addEventListener('change', applyFilter);
})();
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const ctx = document.getElementById("coverageChart").getContext("2d");

  // 🔹 Os dados são passados pelo Flask como strings JSON e depois convertidos no navegador
  const labels = JSON.parse('{{ grafico_labels | tojson | safe }}');
  const valores = JSON.parse('{{ grafico_valores | tojson | safe }}');

  new Chart(ctx, {
    type: "line",
    data: {
      labels: labels,
      datasets: [{
        label: "Valor Total (R$)",
        data: valores,
        borderColor: "#2e7d32",
        backgroundColor: "rgba(46,125,50,0.1)",
        borderWidth: 2,
        fill: true,
        tension: 0.3,
        pointRadius: 4,
        pointBackgroundColor: "#10b981",
        pointHoverRadius: 6
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            color: "#111827",
            font: { size: 12, family: "Inter" },
            callback: function(value) {
              return "R$ " + value.toLocaleString("pt-BR");
            }
          },
          grid: { color: "rgba(229,231,235,0.5)" }
        },
        x: {
          ticks: {
            color: "#111827",
            font: { size: 12, family: "Inter" }
          },
          grid: { display: false }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            label: function(context) {
              return "R$ " + context.parsed.y.toLocaleString("pt-BR", { minimumFractionDigits: 2 });
            }
          }
        }
      }
    }
  });
});
</script>


<script>
  const toggleBtn = document.getElementById('toggleSidebar');
  const sidebar = document.querySelector('.sidebar');
  const mainContent = document.querySelector('.main-content');
  const topbar = document.querySelector('.topbar');

  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('collapsed');
    if (sidebar.classList.contains('collapsed')) {
      mainContent.style.marginLeft = '60px';
      topbar.style.left = '60px';
    } else {
      mainContent.style.marginLeft = '200px';
      topbar.style.left = '200px';
    }
  });

  // Carrossel de Benefícios
  const carousel = document.getElementById('benefitsCarousel');
  const prevBtn = document.getElementById('prevBenefit');
  const nextBtn = document.getElementById('nextBenefit');
  let scrollAmount = 0;

  nextBtn.addEventListener('click', () => {
    scrollAmount += 212; // 200px (card) + 12px (gap)
    if (scrollAmount >= carousel.scrollWidth - carousel.clientWidth) {
      scrollAmount = carousel.scrollWidth - carousel.clientWidth;
      nextBtn.disabled = true;
    }
    prevBtn.disabled = false;
    carousel.scrollTo({ left: scrollAmount, behavior: 'smooth' });
  });

  prevBtn.addEventListener('click', () => {
    scrollAmount -= 212;
    if (scrollAmount <= 0) {
      scrollAmount = 0;
      prevBtn.disabled = true;
    }
    nextBtn.disabled = false;
    carousel.scrollTo({ left: scrollAmount, behavior: 'smooth' });
  });

  // Desabilitar botão "anterior" inicialmente
  prevBtn.disabled = true;

  // Filtro de Seguros
  const filterInput = document.getElementById('insuranceFilter');
  const statusFilter = document.getElementById('statusFilter');
  const insuranceCards = document.querySelectorAll('.insurance-card');

  function filterInsurances() {
    const searchText = filterInput.value.toLowerCase();
    const statusText = statusFilter.value;

    insuranceCards.forEach(card => {
      const title = card.querySelector('h3').textContent.toLowerCase();
      const apolice = card.querySelector('p[title*="Apólice"]').textContent.toLowerCase();
      const status = card.querySelector('.status').textContent;

      const matchesSearch = title.includes(searchText) || apolice.includes(searchText);
      const matchesStatus = !statusText || status === statusText;

      card.style.display = matchesSearch && matchesStatus ? 'block' : 'none';
    });
  }

  filterInput.addEventListener('input', filterInsurances);
  statusFilter.addEventListener('change', filterInsurances);
</script>

<script>
/* ===== SafeViana • Ativar item da sidebar automaticamente ===== */
(function () {
  // Se quiser forçar manualmente em alguma página, defina antes:
  // window.ACTIVE_MENU = 'dashboard' | 'meus_dados' | 'cotacoes' | 'apolices' | 'propostas' | 'sinistros';

  // 0) Onde procurar links (ajuste se sua sidebar tiver outro seletor)
  const LINK_SELECTOR = ".sidebar a, nav.sidebar a, .menu a, .nav a";

  // 1) Mapa de rotas + textos comuns (pode editar/expandir conforme seu app)
  const MAP = [
    { key:"dashboard",  paths:["/dashboard","/area-cliente","/cliente/dashboard","/"], texts:["dashboard"] },
    { key:"meus_dados", paths:["/meus-dados","/cliente/dados"],                   texts:["meus dados","dados"] },
    { key:"cotacoes",   paths:["/solicitar-cotacoes","/cotacoes","/cliente/cotacoes"], texts:["solicitar cotações","nova cotação","cotações"] },
    { key:"apolices",   paths:["/apolices","/minhas-apolices","/cliente/apolices"],    texts:["minhas apólices","apólices"] },
    { key:"propostas",  paths:["/propostas","/minhas-propostas","/cliente/propostas"], texts:["minhas propostas","propostas"] },
    { key:"sinistros",  paths:["/sinistros","/meus-sinistros","/cliente/sinistros"],   texts:["meus sinistros","sinistros"] },
  ];

  // 2) Normaliza path atual
  const norm = s => (s || "").toString().trim().toLowerCase().replace(/\/+$/,"");
  let current = norm(location.pathname);
  if (current === "") current = "/";

  // 3) Coleta links da sidebar
  const links = Array.from(document.querySelectorAll(LINK_SELECTOR));
  if (!links.length) return;

  // Helper para extrair pathname seguro do href
  const getPath = (a) => {
    try { return norm(new URL(a.getAttribute("href"), location.origin).pathname); }
    catch { return ""; }
  };

  // 4) Decide alvo (por ACTIVE_MENU → URL exata → começa com → texto)
  let target = null;

  // 4a) Se o dev quiser forçar via variável global
  if (window.ACTIVE_MENU) {
    const wanted = String(window.ACTIVE_MENU).toLowerCase();
    const item = MAP.find(m => m.key === wanted);
    if (item) {
      target = links.find(a => {
        const p = getPath(a);
        const t = norm(a.textContent);
        return item.paths.map(norm).includes(p) || item.texts.some(tx => t.includes(norm(tx)));
      });
    }
  }

  // 4b) Tentativa por URL exata
  if (!target) {
    target = links.find(a => getPath(a) === current);
  }

  // 4c) Tentativa por “começa com” (ex.: /propostas/123)
  if (!target) {
    target = links.find(a => {
      const p = getPath(a);
      return p && p !== "/" && current.startsWith(p);
    });
  }

  // 4d) Tentativa por texto do link (fallback por título)
  if (!target) {
    // Descobre a chave provável pela URL atual
    const guess = MAP.find(m => m.paths.some(p => current === norm(p) || current.startsWith(norm(p))));
    const texts = guess ? guess.texts : MAP.flatMap(m => m.texts); // se não souber, tenta todos
    const best = new RegExp("\\b(" + texts.map(t => t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|") + ")\\b","i");
    target = links.find(a => best.test(a.textContent || ""));
  }

  // 5) Aplica classe/atributo e injeta estilo mínimo
  if (target) {
    target.classList.add("active");
    target.setAttribute("aria-current","page");
  }

  if (!document.getElementById("sv-active-style")) {
    const style = document.createElement("style");
    style.id = "sv-active-style";
    style.textContent = `
      .sidebar a.active, nav.sidebar a.active, .menu a.active, .nav a.active{
        background:#2e7d32; color:#fff; border-radius:12px;
        box-shadow:0 6px 14px rgba(46,125,50,.18);
      }
      .sidebar a.active i, .sidebar a.active .icon{ color:#fff; }
    `;
    document.head.appendChild(style);
  }

  // 6) Log simples pra diagnosticar se precisar
  // console.log("[SV] path:", current, "→ ativo:", target?.textContent?.trim());
})();
</script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const insuranceFilter = document.getElementById("insuranceFilter");
  const statusFilter = document.getElementById("statusFilter");
  const policies = document.querySelectorAll(".policy-item");

  function applyFilters() {
    const text = insuranceFilter.value.trim().toLowerCase();
    const status = statusFilter.value.toLowerCase();

    policies.forEach(p => {
      const policyNumber = p.getAttribute("data-policy")?.toLowerCase() || "";
      const policyType = p.querySelector(".left span")?.textContent.toLowerCase() || "";
      const policyStatus = p.getAttribute("data-status")?.toLowerCase() || "";

      // Verifica se o texto pesquisado combina com número ou tipo
      const matchesText = policyNumber.includes(text) || policyType.includes(text);

      // Verifica se o status selecionado bate ou se é “Todos”
      const matchesStatus = !status || policyStatus === status;

      // Mostra ou oculta conforme filtros
      if (matchesText && matchesStatus) {
        p.style.display = "block";
      } else {
        p.style.display = "none";
      }
    });
  }

  // Eventos
  insuranceFilter.addEventListener("input", applyFilters);
  statusFilter.addEventListener("change", applyFilters);
});
</script>

</body>
</html>